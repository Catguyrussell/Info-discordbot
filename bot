import discord
import responses 


async def send_message(message, user_message, is_private):
  try:
   response = responses.get_responses(user_message)
   await message.author.send(responses) if is_private else await message.channel.send(response)
   
  except exception as e:
   print(e)
   
   
  def run_discord_bot():
   token = 'MTEwNDE5MDIzNjI4NTc1MTM5Ng.GlZcVe.w1LQrhC9LlLhEFxRr_IkXXejJdyBqgEw80msac'
   intents = discord.intents.default()
   intents.message_content = true
   client = discord.Client(intents=intents)
   
   @client.event
   async def on_ready():
      print(f'{client.user} is now running!')
      
   @client.event
   async def on_message(message):
    if message.author == client.user:
       return
       
    username = str(message.author)
    user_message = str(message.contents)
    channel = str(message.channel)
    
    print(f'{username} said: "{user_message}" ({channel})')
    
    if user_message[0] == '?':
       user_message = user_message[1:]
       await send_message(message, user_message, is_private=true)
    else:
       await send_message(message, user_message, is_private=false)
       
   client.run(token)
